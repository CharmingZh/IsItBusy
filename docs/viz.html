<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Gym Occupancy Data</title>
  <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; }
    #chart { width: 100%; height: 500px; margin: 0 auto; }
  </style>
</head>
<body>
  <h2>Gym Occupancy Over Time</h2>
  <div id="chart"></div>

  <script>
    async function loadData() {
      let response = await fetch('https://raw.githubusercontent.com/CharmingZh/IsItBusy/main/data.csv');
      let text = await response.text();

      let lines = text.trim().split("\n");
      let dataPoints = lines.slice(1).map(line => {
        let [time, west, east, circle] = line.split(",");
        return { time, west: Number(west), east: Number(east), circle: Number(circle) };
      });

      let xAxisData = dataPoints.map(dp => dp.time);
      let westSeries = dataPoints.map(dp => dp.west);
      let eastSeries = dataPoints.map(dp => dp.east);
      let circleSeries = dataPoints.map(dp => dp.circle);

      let chart = echarts.init(document.getElementById('chart'));
      let option = {
        tooltip: { trigger: 'axis' },
        legend: { data: ['West', 'East', 'Circle'] },
        xAxis: { type: 'category', data: xAxisData, axisLabel: { rotate: 45 } },
        yAxis: { type: 'value' },
        series: [
          { name: 'West', type: 'line', data: westSeries },
          { name: 'East', type: 'line', data: eastSeries },
          { name: 'Circle', type: 'line', data: circleSeries }
        ]
      };
      chart.setOption(option);
    }
    loadData();
  </script>
</body>
</html>
